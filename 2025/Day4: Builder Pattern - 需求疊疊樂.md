# Day 4: Builder Pattern - éœ€æ±‚ç–Šç–Šæ¨‚

## è€é—†èªéŒ„ ğŸ’¬

> "æˆ‘è¦å…è²»çš„ï¼Œä½†è¦æ¯”ä»˜è²»ç‰ˆæ›´å¥½ç”¨ï¼"

## ç½é›£ç¾å ´ ğŸ”¥

é€±å››æ—©ä¸Š 10 é»ï¼Œä½ æ­£åœ¨äº«å—è‘—æ˜¨å¤© Singleton Pattern å¸¶ä¾†çš„çŸ­æš«å¹³éœï¼Œçªç„¶è€é—†æ‹¿è‘—ä¸€ç–Šç«¶å“åˆ†æè¡é€²è¾¦å…¬å®¤ã€‚

ã€Œæˆ‘ç ”ç©¶äº†ä¸€ä¸‹å¸‚é¢ä¸Šçš„ç”¢å“ï¼Œã€è€é—†æŠŠè³‡æ–™æ”¤åœ¨æ¡Œä¸Šï¼Œã€Œæˆ‘ç™¼ç¾æˆ‘å€‘çš„ç”¢å“å¤ªç°¡å–®äº†ï¼ã€

ä½ å…§å¿ƒä¸€ç·Šï¼Œç¶“é©—å‘Šè¨´ä½ é€™æ˜¯æš´é¢¨é›¨å‰çš„å¯§éœã€‚

ã€Œä½ çœ‹é€™å€‹ A ç”¢å“æœ‰ AI åŠŸèƒ½ï¼Œé€™å€‹ B ç”¢å“æœ‰å€å¡Šéˆï¼Œé€™å€‹ C ç”¢å“æœ‰ VR é«”é©—ï¼ã€è€é—†è¶Šèªªè¶Šèˆˆå¥®ï¼Œã€Œæˆ‘å€‘è¦æŠŠé€™äº›åŠŸèƒ½éƒ½åŠ é€²å»ï¼ã€

è¨­è¨ˆå¸«å°ç¾å¼±å¼±åœ°å•ï¼šã€Œé‚£æˆ‘å€‘çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿã€

ã€Œéƒ½æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼ã€è€é—†ç†ç›´æ°£å£¯åœ°èªªï¼Œã€Œè€Œä¸”æˆ‘å€‘è¦åšå¾—æ¯”ä»–å€‘éƒ½å¥½ï¼A ç”¢å“çš„ AI è¦ 100 å€è°æ˜ï¼ŒB ç”¢å“çš„å€å¡Šéˆè¦ 1000 å€å®‰å…¨ï¼ŒC ç”¢å“çš„ VR è¦è®“äººåˆ†ä¸æ¸…ç¾å¯¦ï¼ã€

å·¥ç¨‹å¸«é˜¿æ˜è©¦åœ–ç†æ€§åˆ†æï¼šã€Œä½†é€™æ¨£é ç®—æœƒ...ã€

ã€Œä¸ç”¨æ“”å¿ƒé ç®—ï¼ã€è€é—†æ®æ®æ‰‹ï¼Œã€Œæˆ‘å€‘è¦åšä¸€å€‹åŸºç¤ç‰ˆæ˜¯å…è²»çš„ï¼Œä½†åŠŸèƒ½è¦æ¯”ä»˜è²»ç‰ˆæ›´å¤šçš„ç”¢å“ï¼ã€

ä½ çœ‹è‘—è€é—†ï¼Œçªç„¶æ„è­˜åˆ°ä»–ä¸æ˜¯åœ¨é–‹ç©ç¬‘ï¼Œè€Œæ˜¯åœ¨ç„¡æ„ä¸­æ•™å°ä½  **Builder Pattern** çš„ç²¾é«“ï¼š**ä¸€æ­¥ä¸€æ­¥æ§‹å»ºè¤‡é›œç‰©ä»¶ï¼Œæ¯å€‹æ­¥é©Ÿéƒ½å¯ä»¥é¸æ“‡æ€§æ·»åŠ æˆ–é…ç½®**ã€‚

## æ¨¡å¼è§£æ ğŸ§ 

Builder Patternï¼ˆå»ºé€ è€…æ¨¡å¼ï¼‰æ˜¯å‰µå»ºå‹è¨­è¨ˆæ¨¡å¼ä¸­çš„ç©æœ¨å¤§å¸«ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š**å°‡è¤‡é›œç‰©ä»¶çš„æ§‹å»ºéç¨‹åˆ†è§£æˆå¤šå€‹ç°¡å–®æ­¥é©Ÿï¼Œè®“å®¢æˆ¶ç«¯å¯ä»¥éˆæ´»åœ°é¸æ“‡å’Œçµ„åˆé€™äº›æ­¥é©Ÿ**ã€‚

åœ¨æˆ‘å€‘çš„è·å ´ç½é›£ä¸­ï¼Œè€é—†çš„è²ªå¿ƒç‰¹æ€§å®Œç¾åœ°å±•ç¾äº†ç‚ºä»€éº¼éœ€è¦ Builder Patternï¼š

1. **è¤‡é›œç‰©ä»¶æ§‹å»º**ï¼šç”¢å“æœ‰å¾ˆå¤šå¯é¸åŠŸèƒ½
2. **æ­¥é©Ÿå¯é¸æ€§**ï¼šç”¨æˆ¶å¯ä»¥é¸æ“‡è¦å“ªäº›åŠŸèƒ½
3. **é…ç½®éˆæ´»æ€§**ï¼šæ¯å€‹åŠŸèƒ½éƒ½æœ‰ä¸åŒçš„é…ç½®é¸é …
4. **æ§‹å»ºéç¨‹éš”é›¢**ï¼šæ§‹å»ºé‚è¼¯èˆ‡æœ€çµ‚ç”¢å“åˆ†é›¢

Builder Pattern é©ç”¨æ–¼ä»¥ä¸‹æƒ…å¢ƒï¼š

- **è¤‡é›œç‰©ä»¶å‰µå»º**ï¼šç‰©ä»¶æœ‰å¾ˆå¤šå¯é¸åƒæ•¸
- **é…ç½®å¤šæ¨£æ€§**ï¼šéœ€è¦æ”¯æ´å¤šç¨®é…ç½®çµ„åˆ
- **æ­¥é©Ÿå¼æ§‹å»º**ï¼šå‰µå»ºéç¨‹éœ€è¦æŒ‰ç‰¹å®šé †åºé€²è¡Œ
- **ä¸å¯è®Šç‰©ä»¶**ï¼šå‰µå»ºå¾Œç‰©ä»¶ç‹€æ…‹ä¸å¯æ”¹è®Š

Builder Pattern çš„å„ªå‹¢ï¼š

- **ç¨‹å¼ç¢¼å¯è®€æ€§**ï¼šéˆå¼èª¿ç”¨è®“æ§‹å»ºéç¨‹æ¸…æ™°
- **åƒæ•¸é©—è­‰**ï¼šå¯ä»¥åœ¨æ§‹å»ºéç¨‹ä¸­é©—è­‰åƒæ•¸
- **ä¸å¯è®Šæ€§**ï¼šé¿å…ç‰©ä»¶å‰µå»ºå¾Œè¢«æ„å¤–ä¿®æ”¹
- **æ“´å±•æ€§**ï¼šæ–°å¢åŠŸèƒ½ä¸å½±éŸ¿ç¾æœ‰ç¨‹å¼ç¢¼

## ç¨‹å¼ç¢¼ç¯„ä¾‹ ğŸ’»

è®“æˆ‘å€‘ä¾†å¯¦ä½œä¸€å€‹ã€Œå¤¢å¹»ç”¢å“å»ºé€ å™¨ã€ï¼Œå±•ç¤º Builder Pattern çš„å¨åŠ›ï¼š

```ts
// Product ç”¢å“é¡åˆ¥ - æœ€çµ‚æ§‹å»ºçš„è¤‡é›œç‰©ä»¶
class DreamProduct {
  private features: string[] = [];
  private price: number = 0;
  private version: string = "åŸºç¤ç‰ˆ";

  constructor(features: string[], price: number, version: string) {
    this.features = [...features];
    this.price = price;
    this.version = version;
  }

  public getDescription(): string {
    return `${this.version} - $${this.price}\nåŠŸèƒ½ï¼š${this.features.join(
      ", "
    )}`;
  }
}

// ProductBuilder ç”¢å“å»ºé€ å™¨ - Builder Pattern æ ¸å¿ƒ
class ProductBuilder {
  private features: string[] = [];
  private price: number = 0;
  private version: string = "åŸºç¤ç‰ˆ";

  // æ·»åŠ  AI åŠŸèƒ½
  public addAI(): ProductBuilder {
    this.features.push("è¶…æ™ºèƒ½ AI åŠ©æ‰‹");
    this.price += 1000;
    return this;
  }

  // æ·»åŠ å€å¡ŠéˆåŠŸèƒ½
  public addBlockchain(): ProductBuilder {
    this.features.push("é‡å­ç´šå€å¡Šéˆå®‰å…¨");
    this.price += 2000;
    return this;
  }

  // æ·»åŠ  VR åŠŸèƒ½
  public addVR(): ProductBuilder {
    this.features.push("æ²‰æµ¸å¼ VR é«”é©—");
    this.price += 1500;
    return this;
  }

  // æ·»åŠ é›²ç«¯åŒæ­¥
  public addCloudSync(): ProductBuilder {
    this.features.push("é›²ç«¯åŒæ­¥");
    this.price += 500;
    return this;
  }

  // è¨­å®šç‰ˆæœ¬
  public setVersion(version: string): ProductBuilder {
    this.version = version;
    return this;
  }

  // è€é—†ç‰¹æ®Šè¦æ±‚ï¼šå…è²»ä½†æ›´å¥½
  public makeBetterAndFree(): ProductBuilder {
    this.price = 0;
    this.version = "å…è²»å¢å¼·ç‰ˆ";
    this.features.push("æ¯”ä»˜è²»ç‰ˆæ›´å¥½çš„é«”é©—");
    return this;
  }

  // æ§‹å»ºæœ€çµ‚ç”¢å“
  public build(): DreamProduct {
    if (this.features.length === 0) {
      this.features.push("åŸºæœ¬åŠŸèƒ½");
    }

    return new DreamProduct(this.features, this.price, this.version);
  }
}

// ä½¿ç”¨ç¯„ä¾‹
function demonstrateBuilder(): void {
  console.log("Builder Pattern æ ¸å¿ƒæ¦‚å¿µå±•ç¤º");
  console.log("===========================");

  // åŸºç¤ç”¢å“
  const basicProduct = new ProductBuilder().build();
  console.log("åŸºç¤ç”¢å“ï¼š");
  console.log(basicProduct.getDescription());

  // é«˜éšç”¢å“ï¼ˆéˆå¼èª¿ç”¨ï¼‰
  const premiumProduct = new ProductBuilder()
    .addAI()
    .addBlockchain()
    .addVR()
    .setVersion("è±ªè¯ç‰ˆ")
    .build();
  console.log("\nè±ªè¯ç‰ˆç”¢å“ï¼š");
  console.log(premiumProduct.getDescription());

  // è€é—†çš„å¤¢å¹»éœ€æ±‚
  const bossProduct = new ProductBuilder()
    .addAI()
    .addBlockchain()
    .addVR()
    .addCloudSync()
    .makeBetterAndFree()
    .build();
  console.log("\nè€é—†å¤¢å¹»ç”¢å“ï¼š");
  console.log(bossProduct.getDescription());
}

demonstrateBuilder();
```

## ç”Ÿå­˜æŠ€å·§ ğŸ›¡ï¸

1. **åˆç†è¨­è¨ˆæ­¥é©Ÿ**ï¼šå°‡è¤‡é›œç‰©ä»¶çš„å‰µå»ºåˆ†è§£æˆé‚è¼¯æ¸…æ™°çš„æ­¥é©Ÿ
2. **æ”¯æ´éˆå¼èª¿ç”¨**ï¼šè®“ builder æ–¹æ³•è¿”å› thisï¼Œæé«˜ç¨‹å¼ç¢¼å¯è®€æ€§
3. **é©—è­‰æ©Ÿåˆ¶**ï¼šåœ¨ build() æ–¹æ³•ä¸­é©—è­‰å¿…è¦åƒæ•¸
4. **ä¸å¯è®Šæ€§**ï¼šç¢ºä¿ build() å¾Œçš„ç‰©ä»¶ç‹€æ…‹ä¸å¯æ”¹è®Š
5. **ç¾å¯¦æœŸæœ›ç®¡ç†**ï¼šæº«å’Œåœ°å‘è€é—†è§£é‡‹ã€Œå…è²»ä¸”æ›´å¥½ã€çš„æŠ€è¡“æŒ‘æˆ°

## æ˜æ—¥é å‘Š ğŸ”®

**Prototype Pattern - æŠ„è¥²æœ‰ç†**ï¼Œæ¢è¨è€é—†çš„ç¶“å…¸å°è©ï¼šã€Œæˆ‘å€‘è¦é–‹ç™¼è·Ÿ Google ä¸€æ¨£çš„æœå°‹å¼•æ“ï¼Œä½†è¦æ¯”å®ƒå¿«ï¼ã€

æº–å‚™è¿æ¥è€é—†çš„æ¨¡ä»¿å¤©è³¦å’ŒåŸå‹è¤‡è£½çš„è—è¡“å§ï¼
